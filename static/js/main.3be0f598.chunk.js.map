{"version":3,"sources":["ethereum/web3.js","ethereum/config/index.js","ethereum/yun-contract.js","components/home/Header.js","images/ticket.PNG","images/drink.PNG","images/wish.PNG","images/food.PNG","images/story.PNG","ethereum/helpers/index.js","components/home/Rewards.js","components/home/Sign.js","components/hepler/getReward.js","components/home/Playground.js","components/home/Inventory.js","components/home/BottomNav.js","App.js","index.js"],"names":["config","require","Web3","port","network","networkAddress","protocol","host","provider","providers","HttpProvider","web3","module","exports","development","rinkeby","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","breakpoints","up","display","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","sectionDesktop","sectionMobile","Header","setIndex","classes","className","AppBar","Toolbar","Typography","variant","noWrap","to","style","textDecoration","outline","onClick","IconButton","edge","aria-label","aria-controls","aria-haspopup","a","init","yunContract","eth","Contract","shop","abi","signAndSendTransaction","options","privateKey","accounts","signTransaction","signedTransaction","sendSignedTransaction","rawTransaction","sign","methods","_parent","_address","data","encodeABI","gas","exchange","points","name","call","then","r","console","log","catch","er","changeRewardState","index","extraPoints","lottery","initSignDays","root","maxWidth","media","objectFit","margin","backdrop","zIndex","drawer","rewards","image","ticket","content","drink","food","story","wish","Rewards","useState","setPoints","open","setOpen","exchangeRewards","rewardPoints","window","confirm","setTimeout","yun","balancePoint","useEffect","getPoints","Backdrop","src","alt","Box","map","reward","Card","CardActionArea","CardMedia","CardContent","gutterBottom","component","CardActions","Button","disabled","fullWidth","opacity","Sign","signRecords","setSignRecords","canSign","setCanSign","getSignRecords","getPastEvents","fromBlock","results","sortRe","sort","b","returnValues","getSignTime","result","tomorrow1","signAt","tomorrow2","Math","round","Date","getTime","signHandler","size","TableContainer","Paper","marginBottom","Table","table","TableHead","TableRow","TableCell","align","TableBody","record","scope","dateSeparator","format","timeSeparator","meridians","showTime","showDate","getReward","rmn","textMargin","Playground","signDays","setSignDays","totalDays","setTotalDays","rewardRecords","setRewardRecords","loading","setLoading","handlerClick","floor","random","getSignDays","days","tDays","getRewardRecord","Inventory","setRecords","getAllReward","getRewardInventory","id","exchangeAt","state","bottom","left","SimpleBottomNavigation","BottomNavigation","value","onChange","event","newValue","showLabels","BottomNavigationAction","label","Link","icon","App","Container","flexWrap","path","exact","from","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3be0f598.chunk.js","sourcesContent":["const config = require(\"./config\");\r\nconst Web3 = require(\"web3\");\r\nconst networkMode = \"rinkeby\";\r\n\r\nconst port = config.network[networkMode].port;\r\n\r\nconst networkAddress = `${config.network[networkMode].protocol}://${\r\n  config.network[networkMode].host\r\n}${port ? `:${port}` : \"\"}`;\r\nconst provider = new Web3.providers.HttpProvider(networkAddress);\r\nconst web3 = new Web3(provider);\r\n\r\nmodule.exports = web3;\r\n","module.exports = {\r\n  network: {\r\n    development: {\r\n      protocol: \"http\",\r\n      host: \"127.0.0.1\",\r\n      port: \"7545\",\r\n    },\r\n    rinkeby: {\r\n      protocol: \"https\",\r\n      host: \"rinkeby.infura.io/v3/389389e17a1d4f288688e7fb9fce5fe0\",\r\n      port: \"\",\r\n    },\r\n  },\r\n};\r\n","import Web3 from \"web3\";\r\nimport shop from \"./build/contracts/yunyunsite.json\";\r\nconst address = \"0x18450bb6EAD998c21aDfAdC4a4CD8DBdAd6bD72b\"; // rinkeby\r\nexport var web3;\r\nconst init = async () => {\r\n  const provider = new Web3.providers.HttpProvider(\r\n    \"https://rinkeby.infura.io/v3/389389e17a1d4f288688e7fb9fce5fe0\"\r\n  );\r\n  web3 = new Web3(provider);\r\n};\r\ninit();\r\n\r\nexport const yunContract = new web3.eth.Contract(shop.abi, address);\r\n","import React from \"react\";\r\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport { Link } from \"react-router-dom\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"block\",\r\n    },\r\n  },\r\n  search: {\r\n    position: \"relative\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    \"&:hover\": {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: \"auto\",\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    pointerEvents: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  inputRoot: {\r\n    color: \"inherit\",\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create(\"width\"),\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      width: \"20ch\",\r\n    },\r\n  },\r\n  sectionDesktop: {\r\n    display: \"none\",\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      display: \"flex\",\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: \"flex\",\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n}));\r\nconst Header = ({ setIndex }) => {\r\n  const classes = useStyles();\r\n\r\n  const menuId = \"primary-search-account-menu\";\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"sticky\" color=\"secondary\">\r\n        <Toolbar>\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n            乖寶寶簽到網\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n          <Link\r\n            to=\"/yunyuncute\"\r\n            style={{ textDecoration: \"none\", color: \"#fff\", outline: \"none\" }}\r\n            onClick={() => setIndex(-1)}\r\n          >\r\n            <IconButton\r\n              edge=\"end\"\r\n              aria-label=\"account of current user\"\r\n              aria-controls={menuId}\r\n              aria-haspopup=\"true\"\r\n              color=\"inherit\"\r\n            >\r\n              <HomeIcon />\r\n            </IconButton>\r\n          </Link>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/ticket.64a843c6.PNG\";","export default __webpack_public_path__ + \"static/media/drink.2877b354.PNG\";","export default __webpack_public_path__ + \"static/media/wish.37ab8e83.PNG\";","export default __webpack_public_path__ + \"static/media/food.c9c317c0.PNG\";","export default __webpack_public_path__ + \"static/media/story.937b3ab9.PNG\";","import web3 from \"../web3\";\r\nimport { yunContract } from \"../yun-contract\";\r\nexport async function signAndSendTransaction(options, privateKey) {\r\n  let signedTransaction = await web3.eth.accounts.signTransaction(\r\n    options,\r\n    privateKey\r\n  );\r\n  await web3.eth.sendSignedTransaction(signedTransaction.rawTransaction);\r\n}\r\n\r\nexport async function sign() {\r\n  const sign = await yunContract.methods.sign();\r\n\r\n  const options = {\r\n    to: sign._parent._address,\r\n    data: sign.encodeABI(),\r\n    gas: \"1000000\",\r\n  };\r\n  await signAndSendTransaction(\r\n    options,\r\n    \"2a9880d710304eb7992489b262b38a7ce9641a8268c6247436fdae8e451df8d8\"\r\n  );\r\n}\r\n\r\nexport async function exchange(points, name) {\r\n  try {\r\n    const exchange = await yunContract.methods.exchange(points, name);\r\n\r\n    const options = {\r\n      to: exchange._parent._address,\r\n      data: exchange.encodeABI(),\r\n      gas: \"1000000\",\r\n    };\r\n    await signAndSendTransaction(\r\n      options,\r\n      \"2a9880d710304eb7992489b262b38a7ce9641a8268c6247436fdae8e451df8d8\"\r\n    );\r\n  } catch (error) {\r\n    await yunContract.methods\r\n      .exchange(points, name)\r\n      .call()\r\n      .then((r) => console.log(r))\r\n      .catch((er) => console.log(er));\r\n  }\r\n}\r\n\r\nexport async function changeRewardState(index) {\r\n  const changeRewardState = await yunContract.methods.changeRewardState(index);\r\n\r\n  const options = {\r\n    to: changeRewardState._parent._address,\r\n    data: changeRewardState.encodeABI(),\r\n    gas: \"1000000\",\r\n  };\r\n  await signAndSendTransaction(\r\n    options,\r\n    \"2a9880d710304eb7992489b262b38a7ce9641a8268c6247436fdae8e451df8d8\"\r\n  );\r\n}\r\n\r\nexport async function extraPoints(points, name) {\r\n  const extraPoints = await yunContract.methods.extraPoints(points, name);\r\n  const options = {\r\n    to: extraPoints._parent._address,\r\n    data: extraPoints.encodeABI(),\r\n    gas: \"1000000\",\r\n  };\r\n  await signAndSendTransaction(\r\n    options,\r\n    \"2a9880d710304eb7992489b262b38a7ce9641a8268c6247436fdae8e451df8d8\"\r\n  );\r\n}\r\n\r\nexport async function lottery(name) {\r\n  const lottery = await yunContract.methods.lottery(name);\r\n  const options = {\r\n    to: lottery._parent._address,\r\n    data: lottery.encodeABI(),\r\n    gas: \"1000000\",\r\n  };\r\n  await signAndSendTransaction(\r\n    options,\r\n    \"2a9880d710304eb7992489b262b38a7ce9641a8268c6247436fdae8e451df8d8\"\r\n  );\r\n}\r\n\r\nexport async function initSignDays() {\r\n  const initSignDays = await yunContract.methods.initSignDays();\r\n  const options = {\r\n    to: initSignDays._parent._address,\r\n    data: initSignDays.encodeABI(),\r\n    gas: \"1000000\",\r\n  };\r\n  await signAndSendTransaction(\r\n    options,\r\n    \"2a9880d710304eb7992489b262b38a7ce9641a8268c6247436fdae8e451df8d8\"\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ticket from \"../../images/ticket.PNG\";\r\nimport drink from \"../../images/drink.PNG\";\r\nimport wish from \"../../images/wish.PNG\";\r\nimport food from \"../../images/food.PNG\";\r\nimport story from \"../../images/story.PNG\";\r\nimport { yunContract } from \"../../ethereum/yun-contract\";\r\nimport { exchange } from \"../../ethereum/helpers\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    width: 200,\r\n    height: 200,\r\n    objectFit: \"cover\",\r\n    margin: \"0 auto\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nconst rewards = [\r\n  {\r\n    image: ticket,\r\n    name: \"親親卷一張\",\r\n    content: \"換一張代表一天可以多一次親親，不可以同一天用超過一張。\",\r\n    points: 3,\r\n  },\r\n  {\r\n    image: drink,\r\n    name: \"請喝一杯飲料\",\r\n    content: \"約會的時候可以獲得免費飲料一杯，也不可以一次用多張喔。\",\r\n    points: 5,\r\n  },\r\n  {\r\n    image: food,\r\n    name: \"好吃的一餐\",\r\n    content: \"約會的時候可以獲得免費的一餐，不可以使用多張喔，會破產。\",\r\n    points: 25,\r\n  },\r\n  {\r\n    image: story,\r\n    name: \"小故事\",\r\n    content: \"可以聽一則故事，這是很貴很貴的，傳說中只有超級乖寶寶能獲得。\",\r\n    points: 30,\r\n  },\r\n\r\n  {\r\n    image: wish,\r\n    name: \"超級願望\",\r\n    content: \"僅有世界上少數超級乖寶寶能獲得，可以許一個願望。\",\r\n    points: 50,\r\n  },\r\n];\r\n\r\nconst Rewards = () => {\r\n  const classes = useStyles();\r\n  const [points, setPoints] = useState(0);\r\n  const [open, setOpen] = useState(false);\r\n  const exchangeRewards = async (rewardPoints, name) => {\r\n    if (window.confirm(\"確定要兌換嗎!!!\")) {\r\n      setOpen(true);\r\n\r\n      await exchange(rewardPoints, name);\r\n      setTimeout(async () => {\r\n        const balancePoint = await yunContract.methods\r\n          .yun(\"0xf289Bf6ecDb2BC0a2697F437446656C52484D8e6\")\r\n          .call();\r\n        setPoints(balancePoint.points);\r\n      }, 1000);\r\n      setOpen(false);\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getPoints = async () => {\r\n      const balancePoint = await yunContract.methods\r\n        .yun(\"0xf289Bf6ecDb2BC0a2697F437446656C52484D8e6\")\r\n        .call();\r\n      setPoints(balancePoint.points);\r\n    };\r\n    getPoints();\r\n  }, [setPoints]);\r\n  return (\r\n    <>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <img src=\"https://i.imgur.com/btMWvMx.gif\" alt=\"\" />\r\n      </Backdrop>\r\n      <Box display=\"flex\" alignItems=\"center\" margin=\"20px 0\">\r\n        <Typography variant=\"h4\">乖乖芸點數:{points}</Typography>\r\n      </Box>\r\n      {rewards.map((reward) => (\r\n        <Card\r\n          className={classes.root}\r\n          style={{ margin: \"10px 15px\" }}\r\n          key={reward.content}\r\n        >\r\n          <CardActionArea>\r\n            <CardMedia\r\n              className={classes.media}\r\n              image={reward.image}\r\n              title=\"Contemplative Reptile\"\r\n            />\r\n            <CardContent>\r\n              <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                {reward.name}\r\n              </Typography>\r\n              <Typography gutterBottom variant=\"h6\" component=\"span\">\r\n                {reward.points} 點\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                {reward.content}\r\n              </Typography>\r\n            </CardContent>\r\n          </CardActionArea>\r\n          <CardActions>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              disabled={points >= reward.points ? false : true}\r\n              fullWidth\r\n              onClick={() => exchangeRewards(reward.points, reward.name)}\r\n            >\r\n              兌換\r\n            </Button>\r\n          </CardActions>\r\n        </Card>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Rewards;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { yunContract } from \"../../ethereum/yun-contract\";\r\nimport { sign } from \"../../ethereum/helpers\";\r\nimport SimpleDateTime from \"react-simple-timestamp-to-date\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport axios from \"axios\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    height: 250,\r\n  },\r\n  Button: {\r\n    backgroundColor: \"#f50057\",\r\n    \"&:disabled\": {\r\n      color: \"#fff\",\r\n      backgroundColor: \"#a4a4a4 !important\",\r\n      opacity: \"0.9\",\r\n    },\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nconst Sign = () => {\r\n  const classes = useStyles();\r\n  const [signRecords, setSignRecords] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [canSign, setCanSign] = useState(false);\r\n  useEffect(() => {\r\n    const getSignRecords = async () => {\r\n      const results = await yunContract.getPastEvents(\"signRecords\", {\r\n        fromBlock: 0,\r\n      });\r\n      const sortRe = results.sort(\r\n        (a, b) => b.returnValues[1] - a.returnValues[1]\r\n      );\r\n      setSignRecords(sortRe);\r\n    };\r\n    const getSignTime = async () => {\r\n      const result = await yunContract.methods\r\n        .yun(\"0xf289Bf6ecDb2BC0a2697F437446656C52484D8e6\")\r\n        .call();\r\n      const tomorrow1 = +result.signAt + 24 * 3600;\r\n      const tomorrow2 = Math.round(new Date().getTime() / 1000);\r\n\r\n      if (tomorrow1 <= tomorrow2) {\r\n        return;\r\n      }\r\n      setCanSign(true);\r\n    };\r\n    getSignRecords();\r\n    getSignTime();\r\n  }, [setSignRecords, setCanSign]);\r\n\r\n  const signHandler = async () => {\r\n    setOpen(true);\r\n    await sign();\r\n    setTimeout(async () => {\r\n      const results = await yunContract.getPastEvents(\"signRecords\", {\r\n        fromBlock: 0,\r\n      });\r\n      const sortRe = results.sort(\r\n        (a, b) => b.returnValues[1] - a.returnValues[1]\r\n      );\r\n      setCanSign(true);\r\n      setSignRecords(sortRe);\r\n    }, 1000);\r\n    setOpen(false);\r\n  };\r\n\r\n  const se = async () => {\r\n    await axios.get(\"http://localhost:5000/\").then((r) => console.log(r));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <img src=\"https://i.imgur.com/btMWvMx.gif\" alt=\"\" />\r\n      </Backdrop>\r\n      <Box width=\"100%\" margin=\"20px 0\">\r\n        <Button\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n          fullWidth\r\n          color=\"secondary\"\r\n          disabled={canSign}\r\n          onClick={signHandler}\r\n          className={classes.Button}\r\n        >\r\n          簽到\r\n        </Button>\r\n      </Box>\r\n      <TableContainer component={Paper} style={{ marginBottom: \"10px\" }}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">簽到日期</TableCell>\r\n              <TableCell align=\"center\">簽到時間</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {signRecords?.map((record) => (\r\n              <TableRow key={record.returnValues[1]}>\r\n                <TableCell component=\"th\" scope=\"row\" align=\"center\">\r\n                  <SimpleDateTime\r\n                    dateSeparator=\"-\"\r\n                    format=\"MYD\"\r\n                    timeSeparator=\":\"\r\n                    meridians=\"1\"\r\n                    showTime=\"0\"\r\n                  >\r\n                    {record.returnValues[1]}\r\n                  </SimpleDateTime>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  <SimpleDateTime\r\n                    dateSeparator=\"-\"\r\n                    format=\"MYD\"\r\n                    timeSeparator=\":\"\r\n                    showDate=\"0\"\r\n                  >\r\n                    {record.returnValues[1]}\r\n                  </SimpleDateTime>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      {/* <Button onClick={se} size=\"large\" variant=\"contained\" fullWidth>\r\n        Test\r\n      </Button> */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sign;\r\n","const rewards = [\r\n  {\r\n    name: \"點數 3 點\",\r\n    points: 3,\r\n  },\r\n  {\r\n    name: \"點數 5 點\",\r\n    points: 5,\r\n  },\r\n  {\r\n    name: \"點數 10 點\",\r\n    points: 10,\r\n  },\r\n  {\r\n    name: \"點數 20 點\",\r\n    points: 20,\r\n  },\r\n  {\r\n    name: \"點數 50 點\",\r\n    points: 50,\r\n  },\r\n  {\r\n    name: \"親親卷一張\",\r\n  },\r\n  {\r\n    name: \"波摩5分鐘\",\r\n  },\r\n  {\r\n    name: \"小故事\",\r\n  },\r\n];\r\n\r\nconst getReward = (rmn) => {\r\n  if (rmn > 60 && rmn <= 100) {\r\n    return rewards[0];\r\n  } else if (rmn > 30 && rmn <= 60) {\r\n    return rewards[1];\r\n  } else if (rmn > 20 && rmn <= 30) {\r\n    return rewards[2];\r\n  } else if (rmn > 15 && rmn <= 20) {\r\n    return rewards[3];\r\n  } else if (rmn > 10 && rmn <= 15) {\r\n    return rewards[4];\r\n  } else if (rmn > 5 && rmn <= 10) {\r\n    return rewards[5];\r\n  } else if (rmn > 3 && rmn <= 5) {\r\n    return rewards[6];\r\n  } else if (rmn >= 0 && rmn <= 3) {\r\n    return rewards[7];\r\n  }\r\n};\r\n\r\nexport default getReward;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { yunContract } from \"../../ethereum/yun-contract\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport getReward from \"../hepler/getReward\";\r\nimport { extraPoints, lottery  , initSignDays} from \"../../ethereum/helpers\";\r\nimport SimpleDateTime from \"react-simple-timestamp-to-date\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    height: 250,\r\n  },\r\n  Button: {\r\n    backgroundColor: \"#f50057\",\r\n    margin: \"5px 0\",\r\n    \"&:disabled\": {\r\n      color: \"#fff\",\r\n      backgroundColor: \"#dddddd !important\",\r\n      //   opacity: \"0.5\",\r\n    },\r\n  },\r\n  textMargin: {\r\n    margin: \"20px 0\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\n/**\r\n * \r\n    1.點數3點\r\n    2.點數5\r\n    3.點數10\r\n    4.點數20\r\n    5.點數50\r\n    6.免費啾啾\r\n    7.免費波摩5分鐘\r\n    8.免費小故事\r\n */\r\nconst Playground = () => {\r\n  const classes = useStyles();\r\n  const [signDays, setSignDays] = useState();\r\n  const [totalDays, setTotalDays] = useState();\r\n  const [rewardRecords, setRewardRecords] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handlerClick = async () => {\r\n    const rmn = Math.floor(Math.random() * 100);\r\n    const reward = getReward(rmn);\r\n    setLoading(true);\r\n    setOpen(true);\r\n    if (reward?.points) {\r\n      await initSignDays();\r\n      await extraPoints(reward.points, reward.name);\r\n    } else {\r\n      await initSignDays();\r\n      await lottery(reward.name);\r\n    }\r\n\r\n    setTimeout(async () => {\r\n      const results = await yunContract.getPastEvents(\"lotteryRecords\", {\r\n        fromBlock: 0,\r\n      });\r\n      setRewardRecords(results);\r\n      setLoading(false);\r\n    }, 1000);\r\n\r\n    setOpen(false);\r\n  };\r\n  useEffect(() => {\r\n    const getSignDays = async () => {\r\n      const days = await yunContract.methods.signDays().call();\r\n      const tDays = await yunContract.methods.totalDays().call();\r\n      setSignDays(days);\r\n      setTotalDays(tDays);\r\n    };\r\n\r\n    const getRewardRecord = async () => {\r\n      const results = await yunContract.getPastEvents(\"lotteryRecords\", {\r\n        fromBlock: 0,\r\n      });\r\n      setRewardRecords(results);\r\n    };\r\n    getSignDays();\r\n    getRewardRecord();\r\n  }, [setRewardRecords]);\r\n  return (\r\n    <>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <img src=\"https://i.imgur.com/btMWvMx.gif\" alt=\"\" />\r\n      </Backdrop>\r\n      <Box>\r\n        <Typography variant=\"h5\" component=\"h5\" className={classes.textMargin}>\r\n          簽到五天以上可以抽獎哦!\r\n        </Typography>\r\n        <Typography variant=\"h5\" component=\"h5\" className={classes.textMargin}>\r\n          芸芸目前簽到了 {totalDays} 天\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        fullWidth\r\n        color=\"secondary\"\r\n        disabled={signDays >= 5 && !loading ? false : true}\r\n        className={classes.Button}\r\n        onClick={handlerClick}\r\n      >\r\n        抽獎!!!!\r\n      </Button>\r\n\r\n      <TableContainer component={Paper} style={{ marginBottom: \"10px\" }}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">抽獎時間</TableCell>\r\n              <TableCell align=\"center\">獎品</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rewardRecords?.map((record) => (\r\n              <TableRow key={record.returnValues[0]}>\r\n                <TableCell component=\"th\" scope=\"row\" align=\"center\">\r\n                  <SimpleDateTime\r\n                    dateSeparator=\"-\"\r\n                    format=\"MYD\"\r\n                    timeSeparator=\":\"\r\n                  >\r\n                    {record.returnValues[0]}\r\n                  </SimpleDateTime>\r\n                </TableCell>\r\n                <TableCell align=\"center\">{record.returnValues[1]}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Playground;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { yunContract } from \"../../ethereum/yun-contract\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport SimpleDateTime from \"react-simple-timestamp-to-date\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { changeRewardState } from \"../../ethereum/helpers\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\nconst Inventory = () => {\r\n  const [rewards, setRecords] = useState();\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  useEffect(() => {\r\n    const getRewardInventory = async () => {\r\n      const results = await yunContract.methods.getAllReward().call();\r\n      console.log(results);\r\n      setRecords(results);\r\n    };\r\n    getRewardInventory();\r\n  }, []);\r\n\r\n  const exchange = async (id) => {\r\n    setOpen(true);\r\n    await changeRewardState(id - 1);\r\n    const results = await yunContract.methods.getAllReward().call();\r\n    console.log(results);\r\n    setTimeout(() => {\r\n      setRecords(results);\r\n    }, 1000);\r\n    setOpen(false);\r\n  };\r\n  return (\r\n    <>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <img src=\"https://i.imgur.com/btMWvMx.gif\" alt=\"\" />\r\n      </Backdrop>\r\n      <TableContainer component={Paper} style={{ margin: \"10px 0\" }}>\r\n        <Table aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">取得時間</TableCell>\r\n              <TableCell align=\"center\">獎品</TableCell>\r\n              <TableCell align=\"center\">狀態</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rewards?.map((reward) => (\r\n              <TableRow key={reward.exchangeAt}>\r\n                <TableCell align=\"center\">\r\n                  <SimpleDateTime\r\n                    dateSeparator=\"-\"\r\n                    format=\"MYD\"\r\n                    timeSeparator=\":\"\r\n                    showTime=\"0\"\r\n                  >\r\n                    {reward.exchangeAt}\r\n                  </SimpleDateTime>\r\n                </TableCell>\r\n                <TableCell align=\"center\">{reward.name}</TableCell>\r\n                <TableCell align=\"center\">\r\n                  {!reward.state ? (\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      onClick={() => exchange(reward.id)}\r\n                    >\r\n                      兌換\r\n                    </Button>\r\n                  ) : (\r\n                    <Typography component=\"p\">已兌換</Typography>\r\n                  )}\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </>\r\n  );\r\n};\r\nexport default Inventory;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport BottomNavigation from \"@material-ui/core/BottomNavigation\";\r\nimport BottomNavigationAction from \"@material-ui/core/BottomNavigationAction\";\r\nimport ApartmentIcon from \"@material-ui/icons/Apartment\";\r\nimport SportsEsportsIcon from \"@material-ui/icons/SportsEsports\";\r\nimport LocalMallIcon from \"@material-ui/icons/LocalMall\";\r\nimport { Link } from \"react-router-dom\";\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: \"fixed\",\r\n    width: \"100%\",\r\n    bottom: 0,\r\n    left: 0,\r\n  },\r\n});\r\n\r\nexport default function SimpleBottomNavigation({ index, setIndex }) {\r\n  const classes = useStyles();\r\n  const changeRoute = (val) => {\r\n    setIndex(val);\r\n  };\r\n  return (\r\n    <BottomNavigation\r\n      value={index}\r\n      onChange={(event, newValue) => {\r\n        changeRoute(newValue);\r\n      }}\r\n      showLabels\r\n      className={classes.root}\r\n    >\r\n      <BottomNavigationAction\r\n        label=\"兌換中心\"\r\n        component={Link}\r\n        to={\"/yunyuncute/Rewards\"}\r\n        icon={<ApartmentIcon />}\r\n      />\r\n      <BottomNavigationAction\r\n        label=\"抽獎\"\r\n        component={Link}\r\n        to={\"/yunyuncute/Playground\"}\r\n        icon={<SportsEsportsIcon />}\r\n      />\r\n      <BottomNavigationAction\r\n        label=\"物品欄\"\r\n        component={Link}\r\n        to={\"/yunyuncute/Inventory\"}\r\n        icon={<LocalMallIcon />}\r\n      />\r\n    </BottomNavigation>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport \"./App.css\";\r\nimport Header from \"./components/home/Header\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\";\r\nimport Rewards from \"./components/home/Rewards\";\r\nimport Sign from \"./components/home/Sign\";\r\nimport Playground from \"./components/home/Playground\";\r\nimport Inventory from \"./components/home/Inventory\";\r\nimport BottomNav from \"./components/home/BottomNav\";\r\nfunction App() {\r\n  const [index, setIndex] = useState();\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Header setIndex={setIndex} />\r\n\r\n        <Container>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            flexWrap=\"wrap\"\r\n            width=\"100%\"\r\n          >\r\n            <Route path={\"/yunyuncute\"} exact component={Sign} />\r\n            <Route path={\"/yunyuncute/Rewards\"} component={Rewards} />\r\n            <Route path={\"/yunyuncute/Playground\"} component={Playground} />\r\n            <Route path={\"/yunyuncute/Inventory\"} component={Inventory} />\r\n\r\n            <Redirect from={\"/\"} to={\"/yunyuncute\"}></Redirect>\r\n          </Box>\r\n        </Container>\r\n      </div>\r\n      <BottomNav index={index} setIndex={setIndex} />\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <>\r\n    <App />\r\n  </>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}